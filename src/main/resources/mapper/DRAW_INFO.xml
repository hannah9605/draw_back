<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="draw.repository.DrawRepo">
    <select id="SELECT_DRAW" resultType="draw.domain.DrawDomain">
        SELECT * FROM g_draw_list
    </select>

    <insert id="INSERT_DRAW" parameterType="draw.domain.DrawDomain">
        INSERT INTO g_draw_list (file, filename , title, reg_dt) VALUES (#{file}, #{fileName} ,#{title},  #{reg_dt, jdbcType=TIMESTAMP})

    </insert>

    <update id="UPDATE_DRAW" parameterType="draw.domain.DrawDomain">
        UPDATE g_draw_list
        SET filename = #{fileName},
            file = #{file},
            title = #{title}
        WHERE seq = #{seq};
    </update>

    <update id="INCREMENT_COUNT" parameterType="draw.domain.DrawDomain">
        UPDATE g_draw_list
        <set>
            <if test="view_cnt != null">
                view_cnt = view_cnt + 1,
            </if>
            <if test="like_cnt != null">
                like_cnt = like_cnt + 1
            </if>
        </set>
        WHERE seq = #{seq}
    </update>

    <select id="SELECT_DRAW_BY_ID" parameterType="Long" resultType="draw.domain.DrawDomain">
        SELECT * FROM g_draw_list WHERE seq = #{seq}
    </select>

</mapper>
